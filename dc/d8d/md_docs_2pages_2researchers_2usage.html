<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VIPRA Documentation: usage</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">VIPRA Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">usage</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>| <a class="el" href="../../index.html#md_docs_2docs">Main Page</a> | <a class="el" href="../../dc/d8d/md_docs_2pages_2researchers_2usage.html">How To Use</a> | <a class="el" href="../../d8/dbc/md_docs_2pages_2researchers_2base__modules.html">Provided Modules</a> | <a class="el" href="../../d1/d94/md_docs_2pages_2researchers_2behaviors_2behaviors.html">VIPRA Behaviors</a> | <a class="el" href="../../d8/dc5/md_docs_2pages_2researchers_2parameters.html">Module Parameters</a> | <a class="el" href="../../dc/db3/md_docs_2pages_2developers_2overview.html">Developing Modules</a> |</p>
<h1><a class="anchor" id="autotoc_md374"></a>
VIPRA Usage</h1>
<h3><a class="anchor" id="autotoc_md375"></a>
Table of Contents</h3>
<blockquote class="doxtable">
<p>&zwj;Requirements <br  />
 Creating a Simulation <br  />
 Running the Simulation <br  />
 - Flags <br  />
 - Simulation Parameters <br  />
 - Simulation Config <br  />
 - Parameter Sweeps <br  />
 - Maps <br  />
 VIPRA Behaviors <br  />
 Visualization <br  />
 </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md376"></a>
Requirements</h1>
<p>The following are requirement for running the VIPRA simulation.</p>
<ol type="1">
<li><a href="https://cmake.org/download/">CMake</a> version 3.14 or newer</li>
<li>A compiler that supports C++20</li>
<li>Linux</li>
</ol>
<p>Additionally, for distributed simulations:</p>
<ol type="1">
<li>MPI, currently <a href="https://www.open-mpi.org/software/ompi/v5.0/">openMPI</a> is known to work</li>
</ol>
<h1><a class="anchor" id="autotoc_md377"></a>
Creating A Simulation</h1>
<p>The simulation and any modules are compiled by running: </p><div class="fragment"><div class="line">make</div>
</div><!-- fragment --><p>To allow for MPI: </p><div class="fragment"><div class="line">make mpi=on</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md378"></a>
Running The Simulation</h1>
<p>The simulation is run with </p><div class="fragment"><div class="line">./VIPRA &lt;flags&gt;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md379"></a>
Flags</h2>
<ul>
<li><code>-map=&lt;path&gt;</code>: path to the map file (required)</li>
<li><code>-peds=&lt;path&gt;</code>: path to the pedestrian initial positions</li>
<li><code>-params=&lt;path&gt;</code>: path to the parameter file, default = ./module_params.json</li>
<li><code>-modules=&lt;path&gt;</code>: path to the sim config file, default = ./sim_config.json</li>
<li><code>-count=&lt;number&gt;</code>: number of simulations to run, default = 1 (more on this in Parameter Sweeps)</li>
<li><code>-install=&lt;path&gt;</code>: path to module install directory, default = ./install</li>
<li><code>-log=&lt;debug|info|warn|error&gt;</code>: minimum level to log, default = info</li>
</ul>
<h2><a class="anchor" id="autotoc_md380"></a>
Simulation Parameters</h2>
<p>Parameters are loaded into the simulation from a JSON file, each module implementation has its own set of parameters.</p>
<p>An example set of parameters is provided in the <code>examples/module_params.json</code> file.</p>
<h2><a class="anchor" id="autotoc_md381"></a>
Simulation Config</h2>
<p>A simulation config file is a JSON file that tells VIPRA which modules to use.</p>
<p>The types of modules are discussed in: <a class="el" href="../../d4/d5a/md_docs_2pages_2researchers_2modules.html">Modules</a></p>
<p>An example simulation config is provided in the <code>examples/sim_config.json</code> file.</p>
<h2><a class="anchor" id="autotoc_md382"></a>
Parameter Sweeps</h2>
<p>Parameters can be randomized, in parallel or serial, to get a wide range of possible outcomes.</p>
<p>See more on the Parameter Sweeps Page</p>
<h2><a class="anchor" id="autotoc_md383"></a>
Maps</h2>
<p>A map defineds the geometry and special areas used by the simulator. These maps include obstacles, spawn positions, objectives for agents to use as goals, and special areas that change agent behavior.</p>
<p>See more on the Maps Tutorial page</p>
<h1><a class="anchor" id="autotoc_md384"></a>
VIPRA Behaviors</h1>
<p>A detailed explanation of behaviors can be found in the <a class="el" href="../../d1/d94/md_docs_2pages_2researchers_2behaviors_2behaviors.html">Behaviors Page</a></p>
<p>The list of behaviors to use in a simulation run are provided in the simulation parameters JSON file.</p>
<p>Example: </p><div class="fragment"><div class="line">&quot;behavior_model&quot;: {</div>
<div class="line">  &quot;main&quot;: {</div>
<div class="line">    &quot;behaviors_dir&quot;: &quot;behaviors&quot;,</div>
<div class="line">    &quot;behaviors&quot;: [</div>
<div class="line">      &quot;disembark&quot;</div>
<div class="line">    ]</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md385"></a>
Visualization</h1>
<p>A <a class="el" href="../../df/d5b/md_docs_2pages_2researchers_2tools_2visualizer.html">very simple visualizer</a> is provided for <code>TrajectoriesJson</code> output. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
