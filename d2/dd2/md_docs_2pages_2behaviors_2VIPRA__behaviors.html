<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VIPRA Documentation: VIPRA Behaviors</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">VIPRA Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">VIPRA Behaviors</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md33"></a></p>
<p>VIPRA Behaviors is a DSL for creating human behaviors for use in pedestrian dynamics simulations. Its goal is to provide an easy way for researchers without programming experience to test how human behaviors may affect pedestrian dynamics.</p>
<p><code>Behaviors</code> are a way to describe <code>Actions</code> that pedestrians take under a certain <code>Condition</code> without the use of a traditional programming language.</p>
<p><code>Behaviors</code> are comprised of several major parts:</p><ol type="1">
<li><code>Selectors</code> (§S.)</li>
<li><code>Actions</code> (§A.)</li>
<li><code>Events</code> (§E.)</li>
</ol>
<hr  />
<h1><a class="anchor" id="autotoc_md35"></a>
L. Behavior Layout</h1>
<p>The general layout of a <code>Behavior</code> is as follows: </p><div class="fragment"><div class="line">Types Declaration.       // section (§T.)</div>
<div class="line"> </div>
<div class="line">States Declaration.  // section (§St.)</div>
<div class="line"> </div>
<div class="line">Location Declarations. // section (§L.)</div>
<div class="line"> </div>
<div class="line">Selector Declarations. // section (§S.)</div>
<div class="line"> </div>
<div class="line">Event Declartions.   // section (§E.)</div>
<div class="line"> </div>
<div class="line">Action Declarations.   // section (§A.)</div>
</div><!-- fragment --><p>Each Declaration has a subset of components.</p>
<div class="fragment"><div class="line">*Declaration Type*:</div>
<div class="line">  *Component Name* : *Component Value*</div>
<div class="line">  *...*</div>
<div class="line">.</div>
</div><!-- fragment --><p>Each section goes over what components are available for each.</p>
<div class="fragment"><div class="line">Selector:</div>
<div class="line">  Type: injured_person</div>
<div class="line">  Select: 10%</div>
<div class="line">.</div>
</div><!-- fragment --><p><code>Type</code> and <code>Select</code> are both components of the <code>Selector</code> declaration</p>
<hr  />
<h1><a class="anchor" id="autotoc_md37"></a>
Sy. General Syntax Rules</h1>
<p>This section has some simple <code>Syntax</code> rules that must be followed for a <code>Behavior</code> to be considered correct.</p>
<p>The other sections will have the specific <code>Syntax</code> rules for their respective parts, in a <code>Section - General Syntax Rules</code> section</p>
<ol type="1">
<li>All Declarations must end in a '.' <div class="fragment"><div class="line">correct:</div>
<div class="line">  Event:</div>
<div class="line">    Name: Example</div>
<div class="line">    *...*</div>
<div class="line">  .</div>
<div class="line"> </div>
<div class="line">incorrect:</div>
<div class="line">  Event:</div>
<div class="line">    Name: Example</div>
<div class="line">    *...*</div>
</div><!-- fragment --></li>
<li>Each <code>Behavior</code> (§B) must start with a <code>Types Declaration</code> (§T.1)</li>
<li>Each <code>Behavior</code> (§B) must only have 1 <code>Types Declaration</code> (§T.1)</li>
<li>Each <code>Behavior</code> (§B) must have at least 1 <code>Selector</code> (§S)</li>
<li><code>Behaviors</code> are NOT case-sensitive so <code>Consider</code>, <code>consider</code>, and <code>ConSiDEr</code> are all valid.</li>
<li>Comments can be added following '//' or between '/*' and '*/' <div class="fragment"><div class="line">// This is a comment and does not affect the behavior</div>
<div class="line"> </div>
<div class="line">/*</div>
<div class="line">This is a multi-line comment</div>
<div class="line">and does not affect the behavior</div>
<div class="line">*/</div>
</div><!-- fragment --></li>
<li>Whitespace does not affect <code>Behaviors</code>, the following are valid and equivalent. <div class="fragment"><div class="line">Types: typeA typeB.</div>
<div class="line"> </div>
<div class="line">// and</div>
<div class="line"> </div>
<div class="line">Types:</div>
<div class="line">  typeA</div>
<div class="line">  typeB</div>
<div class="line">.</div>
</div><!-- fragment --></li>
<li>Declaration Components can be written in any order, the following are equivalent <div class="fragment"><div class="line">Event:</div>
<div class="line">  Name: Example</div>
<div class="line">  Start: *start condition*</div>
<div class="line">.</div>
<div class="line"> </div>
<div class="line">Event:</div>
<div class="line">  Start: *start condition*</div>
<div class="line">  Name: Example</div>
<div class="line">.</div>
</div><!-- fragment --></li>
</ol>
<hr  />
<h1><a class="anchor" id="autotoc_md39"></a>
T. Types</h1>
<p><code>Types</code> are how pedestrians are organized in <code>Behaviors</code> (§B)</p>
<p>Each pedestrian is assigned a user defined <code>Type</code>, and based on their <code>Type</code> they will follow different <code>Actions</code> (§A).</p>
<hr  />
<h2><a class="anchor" id="autotoc_md41"></a>
T.1. Types Declaration</h2>
<p>A <code>Types Declaration</code> is what says which types are being used in the <code>Behavior</code>.</p>
<p><code>Behaviors</code> can only have 1 <code>Types Declaration</code> with up to 64 types.</p>
<p><code>Types Declarations</code> are slightly different from other declarations, in that they do not have components; instead each type is simply listed out.</p>
<p>Single <code>Type</code>: </p><div class="fragment"><div class="line">Types:</div>
<div class="line">  injured_person</div>
<div class="line">.</div>
</div><!-- fragment --><p>Multiple <code>Types</code>: </p><div class="fragment"><div class="line">Types:</div>
<div class="line"> injured_person</div>
<div class="line"> helper</div>
<div class="line">.</div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="autotoc_md43"></a>
T.1.1. Types Declaration - General Syntax Rules</h3>
<ol type="1">
<li><code>Types Declarations</code> can be any length up to 64 <code>Types</code> <div class="fragment"><div class="line">Types:</div>
<div class="line">  typeA</div>
<div class="line">  typeB</div>
<div class="line">  typeC</div>
<div class="line">  typeD</div>
<div class="line">.</div>
</div><!-- fragment --></li>
<li><code>Types Declarations</code> must be the first declaration in a <code>Behavior</code></li>
</ol>
<hr  />
<h2><a class="anchor" id="autotoc_md45"></a>
T.2. Composite Types</h2>
<p>A Pedestrians <code>Type</code> can be composed of several other types.</p>
<p>A Pedestrian with a <code>Composite Type</code> will have the attributes of each individual <code>Type</code>.</p>
<p>How to assign <code>Composite Types</code> is explained in the <code>Selectors</code> (§S) section.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md47"></a>
T.3. Groups</h2>
<p>For most users, <code>Groups</code> and <code>Types</code> refer to the same thing.</p>
<p>The main difference between a <code>Type</code> and a <code>Group</code> is that there is a base <code>Group</code> for each <code>Behavior</code>, being 'Pedestrian' (or 'Pedestrians').</p>
<p>Each pedestrian with a <code>Type</code> is considered in that <code>Types</code> <code>Group</code>.</p>
<p>Pedestrians with <code>Composite Types</code> are in a <code>Group</code> for each <code>Type</code>.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md49"></a>
T.4. Types - General Syntax Rules</h2>
<ol type="1">
<li><code>Type</code> names can only contain Letters, Underscores, and Hyphens &lsquo;(a-z), (A-Z), &rsquo;_', '-'`</li>
</ol>
<hr  />
<h1><a class="anchor" id="autotoc_md51"></a>
L. Locations</h1>
<p><code>Locations</code> are rectangular regions that can be used in <code>Selectors</code>, <code>Conditions</code>, and <code>Actions</code>.</p>
<p>After being declared, <code>Location</code> names are always preceded by a <code>@</code></p>
<div class="fragment"><div class="line">Location:</div>
<div class="line">  Name: *name*</div>
<div class="line">  Dimensions:</div>
<div class="line">    Center: *center*         // Coord Value (§V.2)</div>
<div class="line">    Lengths: *side lengths*  // Coord Value (§V.2)</div>
<div class="line">    Rotation: *rotation*     // Numeric Value (§V.1)</div>
<div class="line">.</div>
</div><!-- fragment --><ul>
<li>*Name* - The name used to reference this <code>Location</code></li>
<li>*Dimensions* - The dimensions for the <code>Location</code><ul>
<li>*center* - X,Y,Z coordiantes for the center of the rectangle</li>
<li>*side lengths* - X,Y,Z lengths of the rectangle</li>
<li>*rotation* - degrees of clockwise rotation</li>
</ul>
</li>
</ul>
<p>Example: </p><div class="fragment"><div class="line">Location:</div>
<div class="line">  Name: Aisle</div>
<div class="line">  Dimensions:</div>
<div class="line">    Center: {15, 1.7}  // Center of rectangle is at (15, 1.7)</div>
<div class="line">    Lenghts: {30, 0.3}  // Height of 30m, Width of 30cm</div>
<div class="line">    Rotation: 0           // Rotated 0 degrees (aligned with X axis)</div>
<div class="line">.</div>
</div><!-- fragment --> <hr  />
<h2><a class="anchor" id="autotoc_md53"></a>
L.1. Locations - General Syntax Rules</h2>
<ol type="1">
<li><code>Location</code> names are always preceded by a <code>@</code> after the declaration</li>
</ol>
<hr  />
<hr  />
<h1><a class="anchor" id="autotoc_md56"></a>
S. Selectors</h1>
<p><code>Selectors</code> are how pedestrians are selected for a certain <code>Type</code> (§T).</p>
<p>Selecting pedestrians is done through a <code>Selector</code> declaration. The basic syntax is as follows: </p><div class="fragment"><div class="line">Selector:</div>
<div class="line">  Type: *types*</div>
<div class="line">  From: *type*                  // Optional, defaults to base pedestrians group</div>
<div class="line">  Select: *selection criteria*</div>
<div class="line">.</div>
</div><!-- fragment --><ul>
<li>*Select* - The exact <code>Select</code> criteria to use, available <code>Select</code> criteria are in (§S.5.)</li>
<li>*From* - The <code>Group</code> (§T.3) to select pedestrians from</li>
<li>*Type* - The <code>Type</code> (§T.) to assign to selected pedestrians</li>
</ul>
<p>Selectors are applied with precedence equal to the order they appear in the <code>Behavior</code> file.</p>
<p>Example: </p><div class="fragment"><div class="line">Selector:   // Selects exactly 10 pedestrians to be of typeA</div>
<div class="line">  Type: typeA</div>
<div class="line">  Select: 10</div>
<div class="line">.</div>
<div class="line"> </div>
<div class="line">Selector:   // Selects 50% of pedestrians to be of typeB</div>
<div class="line">  Type: typeB</div>
<div class="line">  Select 50%</div>
<div class="line">.</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md58"></a>
S.2. Selecting From Groups</h2>
<p><code>Selectors</code> can select from specific <code>Groups</code> (§T.3)</p>
<p>This has the effect of selecting the pedestrians for a <code>Composite Type</code> (§T.2) but allows for more dynamic proportions.</p>
<div class="fragment"><div class="line">Types:</div>
<div class="line">  typeA</div>
<div class="line">  typeB</div>
<div class="line">  typeC</div>
<div class="line">.</div>
<div class="line"> </div>
<div class="line">Select:        // Selects 50% of pedestrians for typeA</div>
<div class="line">  Type: typeA</div>
<div class="line">  Select: 50%</div>
<div class="line">.</div>
<div class="line"> </div>
<div class="line">Select:        // Selects 15% of typeA pedestrians for typeA &amp; typeB</div>
<div class="line">  Type: typeB</div>
<div class="line">  From: typeA</div>
<div class="line">  Select: 15%</div>
<div class="line">.</div>
<div class="line"> </div>
<div class="line">Select:       // Selects 5% of typeA pedestrians for typeA &amp; typeC</div>
<div class="line">  Type: typeC</div>
<div class="line">  From: typeA</div>
<div class="line">  Select: 5%</div>
<div class="line">.</div>
</div><!-- fragment --><p>With 100 pedestrians:</p><ul>
<li>39 pedestrians are typeA.</li>
<li>8 pedestrians are typeA and typeB.</li>
<li>3 pedestrians are typeA and typeC.</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md60"></a>
S.3. Selector Exclusivity</h2>
<p>When a pedestrian is selected from a <code>Group</code>, it is marked as used and can not be selected by another <code>Selector</code>.</p>
<div class="fragment"><div class="line">Select:</div>
<div class="line">  Type: typeB</div>
<div class="line">  Group: typeA</div>
<div class="line">  Select: 15%</div>
<div class="line">.</div>
</div><!-- fragment --><p> Means: Those 15% of 'typeA' pedestrians can not be selected from again.</p>
<p>However, they can be selected from 'typeB'.</p>
<div class="fragment"><div class="line">Select:</div>
<div class="line">  Type: typeC</div>
<div class="line">  Group: typeB</div>
<div class="line">  Select: 15%</div>
<div class="line">.</div>
</div><!-- fragment --><p>This may result in some pedestrians being of types: typeA, typeB, and typeC.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md62"></a>
S.4. Required Selectors</h2>
<p><code>Selectors</code> can be marked as <code>Required</code> with a 'Required' <code>Component</code>.</p>
<p>This means, if the <code>Selector</code> is unable to be filled an error will be thrown, and the simulation will stop.</p>
<div class="fragment"><div class="line">Types:</div>
<div class="line">  typeA</div>
<div class="line">  typeB</div>
<div class="line">.</div>
<div class="line"> </div>
<div class="line">Selector:</div>
<div class="line">  Type: typeA</div>
<div class="line">  Select: Everyone</div>
<div class="line">.</div>
<div class="line"> </div>
<div class="line">Selector:</div>
<div class="line">  Required</div>
<div class="line">  Type: typeB</div>
<div class="line">  Select: 50%</div>
<div class="line">.</div>
</div><!-- fragment --><p> Output: </p><div class="fragment"><div class="line">Behavior: Example, Required Selector Starved For Type: 2 From Group: 0&quot;</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md64"></a>
S.5. Available Select Criteria</h2>
<ol type="1">
<li>Everyone</li>
<li>Percent</li>
<li>Exactly N</li>
</ol>
<hr  />
<h3><a class="anchor" id="autotoc_md66"></a>
S.5.1. Everyone</h3>
<div class="fragment"><div class="line">Select: Everyone</div>
</div><!-- fragment --><p>This select criteria will select every pedestrian to have the selected <code>Type</code> (§T)</p>
<hr  />
<h3><a class="anchor" id="autotoc_md68"></a>
S.5.2 Percent</h3>
<p>Selects a percentage of a <code>Group</code> for the provided <code>Type</code></p>
<div class="fragment"><div class="line">*X*%</div>
</div><!-- fragment --><p> *X* - Number <code>Value</code> (§V) (1 - 100)</p>
<p>Example: </p><div class="fragment"><div class="line">Select: 15%</div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="autotoc_md70"></a>
S.5.3 Exactly N</h3>
<p>Selects an exact number of pedestrians from a <code>Group</code>.</p>
<div class="fragment"><div class="line">Exaclty *X*</div>
</div><!-- fragment --><p> *X* - Number <code>Value</code> (§V)</p>
<p>Example: </p><div class="fragment"><div class="line">Select: 10</div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="autotoc_md72"></a>
S.5.4 Location</h3>
<p>Selects all pedestrians inside a given location.</p>
<div class="fragment"><div class="line">Select: In *Location*</div>
</div><!-- fragment --><p> *Location* - Name of <code>Location</code> (§L)</p>
<p>Example: </p><div class="fragment"><div class="line">Select: In @Elevator</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md74"></a>
S.6 Selectors - General Syntax Rules</h2>
<hr  />
<h1><a class="anchor" id="autotoc_md76"></a>
A. Actions</h1>
<p><code>Actions</code> are what affect a Pedestrian's position, velocity, state, etc.</p>
<p><code>Actions</code> work by applying their <code>Atoms</code> each time step their <code>Condition</code> is satisfied.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md78"></a>
A.1. Unconditional Actions</h2>
<p>An <code>Unconditional Action</code> will ALWAYS take effect, applying its <code>Atoms</code> each timestep.</p>
<div class="fragment"><div class="line">Action (*type*):</div>
<div class="line">  Response: *atoms*</div>
<div class="line">.</div>
</div><!-- fragment --><ul>
<li>Type being the pedestrian type that follows this <code>Action</code></li>
<li>Atoms being the steps taken in an action, more in (§A.3.)</li>
</ul>
<p>Example: </p><div class="fragment"><div class="line">Action (injured_person):         // Action Declaration for &quot;injured_person&quot;s</div>
<div class="line">  Response: scale velocity 0.75  // Scale Atom (§A.5.2.)</div>
<div class="line">.</div>
</div><!-- fragment --><p> With this Behavior, an injured person will always walk at 75% speed.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md80"></a>
A.2. Conditional Actions</h2>
<p>A <code>Conditional Action</code> will only take effect if its <code>Condition</code> is satisfied.</p>
<p><code>Conditional Actions</code> are written as follows: </p><div class="fragment"><div class="line">Action (*type*):</div>
<div class="line">  Condition: *condition*</div>
<div class="line">  Response: *atoms*</div>
<div class="line">.</div>
</div><!-- fragment --><ul>
<li>*Type* being the pedestrian type that follows this <code>Action</code></li>
<li>*Atoms* being the steps taken in an action, more in (§A.4.)</li>
<li>see (§C.) for an explanation of Conditions</li>
</ul>
<hr  />
<p>Example: </p><div class="fragment"><div class="line">Action (listener): </div>
<div class="line">  Condition: !announcement occurring. // Condition (§C.)</div>
<div class="line">  Response: set velocity {0}          // Set Atom (§A.5.1.)</div>
<div class="line">.</div>
</div><!-- fragment --><p> Pedestrians of listener will stop moving while the announcement event is occurring.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md83"></a>
A.3. Action Durations</h2>
<p>Normally <code>Actions</code> only apply to the time step their <code>Condition</code> is true in.</p>
<p>If a longer response is needed, a <code>Duration</code> can be added to the <code>Action</code>.</p>
<div class="fragment"><div class="line">Action (*type*): </div>
<div class="line">  Condition: *condition*</div>
<div class="line">  Response: *atoms*</div>
<div class="line">  Duration: *value*</div>
<div class="line">.</div>
</div><!-- fragment --><ul>
<li>*Type* being the <code>Type</code> (§T.) the action applies to</li>
<li>*Atoms* being the <code>Atoms</code> (§A.4.) for the <code>Action</code></li>
<li>*Condition* being the <code>Condition</code> (§C.) for the action to start</li>
<li>*value* being a numerical <code>Value</code> (§V.), for how long the action should continue</li>
</ul>
<hr  />
<p>Example, Someone Tripping: </p><div class="fragment"><div class="line">Action (tripper):</div>
<div class="line">  Condition: 10 seconds after !Start // Condition (§C.)</div>
<div class="line">  Response: set velocity {0}         // Set Atom (§A.5.1.)</div>
<div class="line">  Duration: 15 seconds               // Duration</div>
<div class="line">.</div>
</div><!-- fragment --><p>Pedestrians of type <code>tripper</code> will trip after 10 seconds from the simulation starting, and remain still for 15 seconds.</p>
<p>This is odd, as all <code>trippers</code> will trip at exactly the same time: Look at <code>Values</code> (§V.) for how to add randomness to <code>Durations</code> and <code>Conditions</code></p>
<hr  />
<h2><a class="anchor" id="autotoc_md86"></a>
A.4. Atoms</h2>
<p><code>Atoms</code> are the part of an <code>Action</code> that actually affects a pedestrian.</p>
<p>The do this by changing pedestrian <code>Attributes</code> (§Att.).</p>
<p>§A.5. has the list of available <code>Atoms</code>.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md88"></a>
A.4.1 Atom Lists</h2>
<p>An <code>Atom List</code> is the collection of <code>Atoms</code> that make up an <code>Action</code>.</p>
<p><code>Atom Lists</code> are written as follows: <code>*Atom* , *Atom*</code></p>
<p><b>Important Note:</b> <code>Atom</code> effects are applied in the order they are listed</p>
<hr  />
<p>Example:</p>
<div class="fragment"><div class="line">set velocity {0}, set state #listening</div>
</div><!-- fragment --><p> This <code>Atom List</code> will result in the pedestrian stopping and their state being listening</p>
<p>(Pedestrian state is useful in <code>Conditions</code> (§C.))</p>
<hr  />
<h2><a class="anchor" id="autotoc_md91"></a>
A.5. Available Atoms</h2>
<hr  />
<h3><a class="anchor" id="autotoc_md93"></a>
A.5.1. Set</h3>
<p>The <code>Set Atom</code> sets a pedestrian's attribute to a specific value.</p>
<div class="fragment"><div class="line">set *attribute* to *attribute value*</div>
</div><!-- fragment --><ul>
<li>Attributes are described in (§Att.).</li>
<li>Attribute Values are described in (§Att.1).</li>
</ul>
<hr  />
<h3><a class="anchor" id="autotoc_md95"></a>
A.5.2. Scale</h3>
<p>The <code>Scale Atom</code> multiplies a pedestrian attribute by a given value</p>
<div class="fragment"><div class="line">scale *attribute* *attribute_value*</div>
</div><!-- fragment --><p>Currently, only pedestrian <code>Velocity</code> can be scaled.</p>
<ul>
<li>Attributes are described in (§Att.).</li>
<li>Attribute Values are described in (§Att.1 ).</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md97"></a>
A.6. Action Targets</h2>
<p>Sometimes Pedestrians will want to affect other pedestrians around them.</p>
<p>This is done through the use of <code>Targets</code>.</p>
<div class="fragment"><div class="line">Action (*type*):</div>
<div class="line">  Condition: *condition*  // Condition (§C.)</div>
<div class="line">  Response: *atoms*       // Atoms (§A.4.)</div>
<div class="line">  Target: *target*        // Action Target</div>
</div><!-- fragment --><hr  />
<p>Example:</p>
<div class="fragment"><div class="line">Action (aggressive):</div>
<div class="line">  Response: set target velocity {0}</div>
<div class="line">  Target: nearest pedestrian</div>
</div><!-- fragment --><p> This results in the pedestrian stopping the nearest pedestrian around them</p>
<hr  />
<h2><a class="anchor" id="autotoc_md100"></a>
A.6.1 Available Targets</h2>
<hr  />
<h2><a class="anchor" id="autotoc_md102"></a>
A.6.1.1 Nearest of Type</h2>
<p>Selects the nearest of a given type to be the target</p>
<div class="fragment"><div class="line">nearest *type list*   // selects the nearest pedestrian with any of the listed types</div>
<div class="line"> </div>
<div class="line">// or</div>
<div class="line"> </div>
<div class="line">nearest pedestrian    // selects any pedestrian</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md104"></a>
A.6.2 Target Modifiers</h2>
<p><code>Target Modifiers</code> change how pedestrians are selected to be the Target of an action.</p>
<p><code>Target Modifiers</code> are simply appended to the end of the <code>Action Target</code>.</p>
<p>Example: </p><div class="fragment"><div class="line">Target: nearest pedestrain in front within 1.0</div>
</div><!-- fragment --><p> This selects the nearest pedestrian in the direction of motion that is within 1 meter.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md106"></a>
A.6.2.1 Distance Target Modifier</h2>
<p>Targets can be filtered by their distance to the pedestrian.</p>
<div class="fragment"><div class="line">within *numeric value*</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md108"></a>
A.6.2.2 Direction Target Modifier</h2>
<p>Targets can be filtered by their direction from the pedestrian.</p>
<p>Currently, there are only two directions. </p><div class="fragment"><div class="line">in front   // used to select pedestrians in the direction the pedestrian is headed</div>
<div class="line"> </div>
<div class="line">behind     // used to select pedestrians in the opposite direction the pedestrian is headed</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md110"></a>
A.6.2.3. Location Target Modifier</h2>
<p>Targets can be filtered by whether they are inside a <code>Location</code> or not.</p>
<div class="fragment"><div class="line">in *location name*</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md112"></a>
C. Conditions</h1>
<p>A <code>Condition</code> is what decides if a <code>Conditional Action</code> or <code>Event</code> occurs.</p>
<p><code>Conditions</code> are comprised of one or more <code>Sub Conditions</code> and the boolean operations between them (and/or).</p>
<p><code>Conditions</code> do not stand on their own, and only appear as part of an <code>Action</code> or <code>Event</code> declaration.</p>
<hr  />
<p>Example:</p>
<div class="fragment"><div class="line">Action (typeA):</div>
<div class="line">  Condition: !example occurred and 5 seconds after !Start</div>
<div class="line">  Response: set velocity {0}</div>
<div class="line">  Duration: 10 seconds</div>
<div class="line">.</div>
</div><!-- fragment --><p> This results in typeA pedestrians stopping for 10 seconds after the example event has occurred but not before 5 seconds have passed in the simulation.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md115"></a>
C.1 Sub Conditions</h2>
<p>A <code>Sub Condition</code> defines a single condition of the state of the simulation in which it returns true.</p>
<p>Available <code>Sub Conditions</code> are in section (§C.2.)</p>
<hr  />
<h2><a class="anchor" id="autotoc_md117"></a>
C.2 Available Sub Conditions</h2>
<hr  />
<h3><a class="anchor" id="autotoc_md119"></a>
C.2.1. Elapsed Time</h3>
<p>This <code>Condition</code> will be true when a provided amount of time has passed from the start of an <code>Event</code> (§E.)</p>
<p><b>Note:</b> This is true only for one time step when the time has elapsed, until the <code>Event</code> starts again.</p>
<div class="fragment"><div class="line">*numeric value* seconds after *event*.</div>
</div><!-- fragment --><hr  />
<p>Example: </p><div class="fragment"><div class="line">Action (typeA):</div>
<div class="line">  Condition: 10 seconds after !Start // Elapsed Time Condition</div>
<div class="line">  Response: set velocity {0}         // Atom (§A.4)</div>
<div class="line">  Duration: 5 seconds                // Duration (§A.3)</div>
<div class="line">.</div>
</div><!-- fragment --><p> <b>Note:</b> without the <code>Duration</code> the pedestrian would stop moving for only one time step.</p>
<hr  />
<h3><a class="anchor" id="autotoc_md122"></a>
C.2.2. Spatial</h3>
<p>This <code>Condition</code> will be true when the condition Target is within a certain distance</p>
<div class="fragment"><div class="line">target within *numeric value*.</div>
</div><!-- fragment --><hr  />
<p>Example: </p><div class="fragment"><div class="line">Action (typeA):</div>
<div class="line">  Condition: 10 seconds after !Start // Elapsed Time Condition</div>
<div class="line">  Response: set velocity {0}         // Atom (§A.4)</div>
<div class="line">  Duration: 5 seconds                // Duration (§A.3)</div>
<div class="line">.</div>
</div><!-- fragment --><p> <b>Note:</b> without the <code>Duration</code> the pedestrian would stop moving for only one time step.</p>
<hr  />
<h3><a class="anchor" id="autotoc_md125"></a>
C.2.3. Event Status</h3>
<p>This <code>Condition</code> checks for the status of an <code>Event</code> (§E.)</p>
<div class="fragment"><div class="line">*event* is *status*</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md126"></a>
Available Statuses:</h3>
<div class="fragment"><div class="line">Starting  // True for the timestep the event starts</div>
<div class="line">Ending    // True for the timestep the event ends</div>
<div class="line">Occurring // True for every timestep between event start and end</div>
<div class="line">Occurred  // True if the event has occurred at all during the simulation</div>
</div><!-- fragment --><hr  />
<p>Example: </p><div class="fragment"><div class="line">Action (listener):</div>
<div class="line">  Condition: !announcement is occurring</div>
<div class="line">  Response: set velocity to {0}</div>
<div class="line">.</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md129"></a>
C.2.4. Location Enter/Leave</h2>
<p>This <code>Condition</code> checks if a pedestrian has entered or left a <code>Location</code> (§L.)</p>
<div class="fragment"><div class="line">Enter *location name*</div>
<div class="line"> </div>
<div class="line">// or</div>
<div class="line"> </div>
<div class="line">Exit *location name*</div>
</div><!-- fragment --><p>Example: </p><div class="fragment"><div class="line">Action (Luggage_Grabber):</div>
<div class="line">  Condition: Enter @Aisle</div>
<div class="line">  Response: set velocity to {0}</div>
<div class="line">  Duration: 10-30 seconds</div>
<div class="line">.</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md131"></a>
C.2.5. Inside Location</h2>
<p>This <code>Condition</code> checks if a pedestrian is inside a <code>Location</code> (§L.)</p>
<div class="fragment"><div class="line">In *location name*</div>
</div><!-- fragment --><p>Example: </p><div class="fragment"><div class="line">Action (Patient):</div>
<div class="line">  Target: nearest pedestrian, within 5m, in front</div>
<div class="line">  Condition: Target in @Elevator</div>
<div class="line">  Response: set velocity to {0}</div>
<div class="line">.</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md133"></a>
C.2.6. Pedestrian Attributes</h2>
<p>This <code>Condition</code> checks if a pedestrian's <code>Attribute</code> (§Att.) is a given value (§Att.1)</p>
<div class="fragment"><div class="line">*attribute* is *attribute value*</div>
</div><!-- fragment --><p>Example: </p><div class="fragment"><div class="line">Action (typeA):</div>
<div class="line">  Condition: state is #scared  // Condition for the pedestrian&#39;s &#39;State&#39; attribute</div>
<div class="line">  Response: scale velocity 2.0</div>
<div class="line">.</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md135"></a>
Att. Attributes</h1>
<p>Each pedestrian has what are called <code>Attributes</code>.</p>
<p>These attributes include: </p><div class="fragment"><div class="line">Position    // Coordiante pedestrian is currently at</div>
<div class="line">Velocity    // Velocity vector of pedestrian</div>
<div class="line">Goal        // The current coordinate the pedestrian is heading to</div>
<div class="line">State       // Pedestrians internal state</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md136"></a>
These <code>Attributes</code> are important for <code>Actions</code> and <code>Conditions</code>.</h2>
<h1><a class="anchor" id="autotoc_md137"></a>
Ex. Example</h1>
<div class="fragment"><div class="line">Action (typeA):</div>
<div class="line">  Condition: state is #scared  // Condition for the pedestrian&#39;s &#39;State&#39; attribute</div>
<div class="line">  Response: scale velocity 2.0 // Atom affecting the pedestrian&#39;s &#39;Velocity&#39; attribute</div>
<div class="line">.</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md139"></a>
Att.1 Attribute Values</h1>
<p>Attributes each have a different value type.</p>
<div class="fragment"><div class="line">Position: Coordinate (§V.2)</div>
<div class="line">Velocity: Coordinate (§V.2)</div>
<div class="line">Goal    : Coordinate (§V.2)</div>
<div class="line">State   : State      (§V.3)</div>
</div><!-- fragment --><p>Generally, <code>Attribute Values</code> can only be compared to others of the same type, except <code>Coordinate</code> values.</p>
<p><code>Coordinate</code> values can be compared with <code>Locations</code>.</p>
<p>Example </p><div class="fragment"><div class="line">Condition: position is @aisle</div>
<div class="line"> </div>
<div class="line">// or</div>
<div class="line"> </div>
<div class="line">Condition: goal is @aisle</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md141"></a>
E. Events</h1>
<p>An <code>Event</code> is something that occurs during a simulation, for example an announcement or fire.</p>
<p><code>Events</code> have a start <code>Condition</code> and, optionally, an end <code>Condition</code> (§C)</p>
<p>An <code>Event</code> can only be described once, if a <code>Behavior</code> file tries to redefine an <code>Event</code> of the same name a <code>Behavior Error</code> is thrown.</p>
<p><code>Event</code> names are always preceded by a <code>!</code></p>
<p>Example: </p><div class="fragment"><div class="line">!announcement</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md143"></a>
E.1. Creating Events</h2>
<p><code>Events</code> a defined as follows: </p><div class="fragment"><div class="line">Event:</div>
<div class="line">  Name: *name*</div>
<div class="line">  Start: *Condition*</div>
<div class="line">  End: *Condition*    // Optional</div>
<div class="line">.</div>
</div><!-- fragment --><p>Example:</p>
<div class="fragment"><div class="line">Event:</div>
<div class="line">  Name: example</div>
<div class="line">  Start: 10 seconds after !Start</div>
<div class="line">  End: 10 seconds after !example</div>
<div class="line">.</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md145"></a>
E.2. Special Events</h2>
<p>Currently, there is only one special event that is predefined for each <code>Behavior</code>: <code>!Start</code>.</p>
<p>The <code>!Start</code> event fires at the start of a simulation run and is always <code>Occurring</code>.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md147"></a>
E.3. Events - General Syntax Rules</h2>
<hr  />
<h1><a class="anchor" id="autotoc_md149"></a>
V. Values</h1>
<hr  />
<h2><a class="anchor" id="autotoc_md151"></a>
V.1. Numerical Values</h2>
<p>Anywhere there is a numerical value required the following can be used (with some exceptions):</p><ol type="1">
<li><code>Exact Values</code></li>
<li><code>Range Values</code></li>
<li><code>Random Values</code></li>
</ol>
<hr  />
<h3><a class="anchor" id="autotoc_md153"></a>
V.1.1. Float vs. Number Values</h3>
<p>There are two kinds of <code>Numerical Values</code>:</p><ol type="1">
<li><code>Float Values</code></li>
<li><code>Number Values</code></li>
</ol>
<p>The difference between the two is simple:</p><ol type="1">
<li><code>Float Values</code> have a decimal value</li>
<li><code>Number Values</code> are whole numbers</li>
</ol>
<hr  />
<p>Example: </p><div class="fragment"><div class="line">50    // Number Value, has no decimal places</div>
<div class="line">50.15 // Float Value, has a decimal value</div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="autotoc_md156"></a>
V.1.1. Exact Values</h3>
<p><code>Exact Values</code> are used when the value should be a specific value</p>
<p><code>Exact Values</code> can either be a <code>Float Value</code> or <code>Number Value</code>.</p>
<p><code>Exact Values</code> are written as simple numerical values.</p>
<div class="fragment"><div class="line">50    </div>
<div class="line">50.15 </div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="autotoc_md158"></a>
V.1.2. Range Values</h3>
<p><code>Range Values</code> are singular random values within a given range.</p>
<p>When the <code>Behavior</code> is run, the value is the same for every individual.</p>
<hr  />
<h3><a class="anchor" id="autotoc_md160"></a>
V.1.2.1 Float Value Ranges vs. Number Value Ranges</h3>
<p><code>Range Values</code> are either <code>Float Value Ranges</code> or <code>Number Value Ranges</code></p>
<p>With the difference being that: <code>Float Value Ranges</code> are any real value between the range and <code>Number Value Ranges</code> are any integer value between the range.</p>
<p><code>Range Values</code> are written as follows: </p><div class="fragment"><div class="line">// Number Value Range -&gt; 1, 2, or 3</div>
<div class="line">1-3</div>
<div class="line">or</div>
<div class="line">1 to 3</div>
<div class="line"> </div>
<div class="line">// Float Value Range -&gt; 1.0, 1.003, 1.11, 2.3, 2.5, 3.0, etc.</div>
<div class="line">1.0-3.0</div>
<div class="line">or</div>
<div class="line">1.0 to 3.0</div>
</div><!-- fragment --><hr  />
<p>Example: </p><div class="fragment"><div class="line">Selector:</div>
<div class="line">  Type: typeA</div>
<div class="line">  Select: 10-20%</div>
<div class="line">.</div>
</div><!-- fragment --><p>The exact percentage will be a random integer value between 10 and 20.</p>
<hr  />
<h3><a class="anchor" id="autotoc_md163"></a>
V.1.3. Random Values</h3>
<p><code>Random Values</code> are very similar to <code>Range Values</code>, with a random value in a given range.</p>
<p>The big difference is that: <code>Range Values</code> only have one random value, <code>Random Values</code> have a random value that is different for each pedestrian.</p>
<hr  />
<h3><a class="anchor" id="autotoc_md165"></a>
V.1.3.1 Float Random Values vs. Number Random Values</h3>
<p><code>Random Values</code> are either <code>Float Random Values</code> or <code>Number Random Values</code></p>
<p>With the difference being that: <code>Float Random Value</code> are any real value between the range and <code>Number Random Values</code> are any integer value between the range.</p>
<p>Random Values are written as follows: </p><div class="fragment"><div class="line">// Number Random Value -&gt; 1, 2, or 3 (different for each pedestrian)</div>
<div class="line">random 1-3</div>
<div class="line">// or</div>
<div class="line">random 1 to 3</div>
<div class="line"> </div>
<div class="line">// Float Random Value -&gt; 1.0, 1.003, 1.11, 2.3, 2.5, 3.0, etc. (different for each pedestrian)</div>
<div class="line">random 1.0-3.0</div>
<div class="line">// or</div>
<div class="line">random 1.0 to 3.0</div>
</div><!-- fragment --><hr  />
<p>Example: </p><div class="fragment"><div class="line">Action (typeA):</div>
<div class="line">  Condition: random 5-10 seconds after !Start</div>
<div class="line">  Response: set velocity {0}</div>
<div class="line">  Duration: random 10-20</div>
<div class="line">.</div>
</div><!-- fragment --><p> Each typeA pedestrian will stop randomly between 5 and 10 seconds after the start, then stay still for a random amount of time between 10 and 20 seconds.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md168"></a>
V.2 Coordinates</h2>
<p>Coordinate Values are X, Y, Z coordinates.</p>
<p>They are written: </p><div class="fragment"><div class="line">{ *numeric value*, *numeric value*, *numeric value* }</div>
</div><!-- fragment --><p>The Y and Z portions can be left out, they are defaulted to 0: </p><div class="fragment"><div class="line">{0}</div>
<div class="line"> </div>
<div class="line">// is the same as</div>
<div class="line"> </div>
<div class="line">{0, 0}</div>
<div class="line"> </div>
<div class="line">// is the same as</div>
<div class="line"> </div>
<div class="line">{0, 0, 0}</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md170"></a>
V.3 State</h2>
<p>Each pedestrian has a <code>State</code> associated with it.</p>
<p><code>States</code> are user defined, and used for <code>Conditions</code></p>
<p><code>States</code> are always preceded by a '#'.</p>
<p><code>States</code> are defined as follows: </p><div class="fragment"><div class="line">Pedestrian States:</div>
<div class="line">  #stateA,</div>
<div class="line">  #stateB,</div>
<div class="line">  #stateC</div>
<div class="line">.</div>
</div><!-- fragment --><p>Ex. Example</p>
<div class="fragment"><div class="line">Pedestrian States:</div>
<div class="line">  #happy,</div>
<div class="line">  #scared,</div>
<div class="line">  #waiting</div>
<div class="line">.</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
