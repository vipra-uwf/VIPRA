<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VIPRA Documentation: behaviors_syntax</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">VIPRA Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">behaviors_syntax</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>| <a class="el" href="../../index.html#md_docs_2docs">Main Page</a> | <a class="el" href="../../dc/d8d/md_docs_2pages_2researchers_2usage.html">How To Use</a> | <a class="el" href="../../d8/dbc/md_docs_2pages_2researchers_2base__modules.html">Provided Modules</a> | <a class="el" href="../../d1/d94/md_docs_2pages_2researchers_2behaviors_2behaviors.html">VIPRA Behaviors</a> | Module Parameters | <a class="el" href="../../dc/db3/md_docs_2pages_2developers_2overview.html">Developing Modules</a> |</p>
<h1><a class="anchor" id="autotoc_md214"></a>
VIPRA Behaviors Syntax Reference</h1>
<p>&gt;<b>Document Note:</b> Text wrapped with <code>&lt;</code> and <code>&gt;</code>, denote a placeholder value. You should not include <code>&lt;</code> and <code>&gt;</code> when writing Behaviors.*</p>
<h1><a class="anchor" id="autotoc_md215"></a>
Behavior Layout</h1>
<p>The general layout of a <code>Behavior</code> is as follows: </p><div class="fragment"><div class="line">Types Declaration.</div>
<div class="line"> </div>
<div class="line">States Declaration.</div>
<div class="line"> </div>
<div class="line">Location Declarations.</div>
<div class="line"> </div>
<div class="line">Selector Declarations.</div>
<div class="line"> </div>
<div class="line">Event Declartions.</div>
<div class="line"> </div>
<div class="line">Action Declarations.</div>
</div><!-- fragment --><p>Each Declaration has a subset of components.</p>
<div class="fragment"><div class="line">&lt;declaration_type&gt;:</div>
<div class="line">  &lt;component_name&gt; : &lt;component_value&gt;</div>
<div class="line">  ...</div>
<div class="line">.</div>
</div><!-- fragment --><p>Each section goes over what components are available for each.</p>
<p>Example: </p><div class="fragment"><div class="line">Selector:</div>
<div class="line">  Type: injured_person</div>
<div class="line">  Select: 10%</div>
<div class="line">.</div>
</div><!-- fragment --><p> <code>Type</code> and <code>Select</code> are both components of the `Selector` declaration</p>
<hr  />
<h1><a class="anchor" id="autotoc_md217"></a>
Behavior General Syntax Rules</h1>
<p>This section has some simple <code>Syntax</code> rules that must be followed for a <code>Behavior</code> to be considered correct.</p>
<p>The other sections will have the specific <code>Syntax</code> rules for their respective parts, in a <code>Section - General Syntax Rules</code> section</p>
<ol type="1">
<li>All Declarations must end in a <code>.</code> <div class="fragment"><div class="line">correct:</div>
<div class="line">  Event:</div>
<div class="line">    Name: Example</div>
<div class="line">    ...</div>
<div class="line">  .</div>
<div class="line"> </div>
<div class="line">incorrect:</div>
<div class="line">  Event:</div>
<div class="line">    Name: Example</div>
<div class="line">    ...</div>
</div><!-- fragment --></li>
<li>Each <code>Behavior</code> must <b>start</b> with a Types Declaration</li>
<li>Each <code>Behavior</code> must <b>only have 1</b> Types Declaration</li>
<li>Each <code>Behavior</code> must have <b>at least 1</b> Selector</li>
<li><code>Behaviors</code> are NOT case-sensitive so <code>Consider</code>, <code>consider</code>, and <code>ConSiDEr</code> are all valid.</li>
<li>Comments can be added following '//' or between '/*' and '*/' <div class="fragment"><div class="line">// This is a comment and does not affect the behavior</div>
<div class="line"> </div>
<div class="line">/*</div>
<div class="line">This is a multi-line comment</div>
<div class="line">and does not affect the behavior</div>
<div class="line">*/</div>
</div><!-- fragment --></li>
<li>Whitespace does not affect <code>Behaviors</code>, the following are valid and equivalent. <div class="fragment"><div class="line">Types: typeA typeB.</div>
<div class="line"> </div>
<div class="line">// and</div>
<div class="line"> </div>
<div class="line">Types:</div>
<div class="line">  typeA</div>
<div class="line">  typeB</div>
<div class="line">.</div>
</div><!-- fragment --></li>
<li>Declaration Components can be written in any order, the following are equivalent <div class="fragment"><div class="line">Event:</div>
<div class="line">  Name: Example</div>
<div class="line">  Start: &lt;start_condition&gt;</div>
<div class="line">.</div>
<div class="line"> </div>
<div class="line">Event:</div>
<div class="line">  Start: &lt;start_condition&gt;</div>
<div class="line">  Name: Example</div>
<div class="line">.</div>
</div><!-- fragment --></li>
</ol>
<hr  />
<h1><a class="anchor" id="autotoc_md219"></a>
Types</h1>
<p><code>Types</code> are how pedestrians are organized in <code>Behaviors</code></p>
<p>Each pedestrian is assigned a user-defined <code>Type</code>. These <code>Types</code> are used to categorize the Actions pedestrians will take during the simulation.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md221"></a>
Types Declaration</h2>
<p><code>Types</code> are declared in the <code>Types Declaration</code> of a <code>Behavior</code>.</p>
<p>A <code>Types Declaration</code> is what says which types are being used in the <code>Behavior</code>.</p>
<p><code>Behaviors</code> can only have 1 <code>Types Declaration</code> which can include up to 64 <code>Types</code>.</p>
<p><code>Types Declarations</code> are slightly different from other declarations, in that they do not have components; instead each type is simply listed out.</p>
<p>Single <code>Type</code>: </p><div class="fragment"><div class="line">Types:</div>
<div class="line">  injured_person</div>
<div class="line">.</div>
</div><!-- fragment --><p>Multiple <code>Types</code>: </p><div class="fragment"><div class="line">Types:</div>
<div class="line"> injured_person</div>
<div class="line"> helper</div>
<div class="line">.</div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="autotoc_md223"></a>
Types Declaration General Syntax Rules</h3>
<ol type="1">
<li><code>Types Declarations</code> can be any length up to 64 <code>Types</code> <div class="fragment"><div class="line">Types:</div>
<div class="line">  typeA</div>
<div class="line">  typeB</div>
<div class="line">  typeC</div>
<div class="line">  typeD</div>
<div class="line">.</div>
</div><!-- fragment --></li>
<li><code>Types Declarations</code> must be the first declaration in a <code>Behavior</code></li>
</ol>
<hr  />
<h2><a class="anchor" id="autotoc_md225"></a>
Composite Types</h2>
<p>A Pedestrians <code>Type</code> can be composed of several other types.</p>
<p>A Pedestrian with a <code>Composite Type</code> will have the attributes of each individual <code>Type</code>.</p>
<p>How to assign <code>Composite Types</code> is explained in the Selectors section.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md227"></a>
Groups</h2>
<p>For most users, <code>Groups</code> and <code>Types</code> refer to the same thing.</p>
<p>The main difference between a <code>Type</code> and a <code>Group</code> is that there is a base <code>Group</code> for each <code>Behavior</code>, being 'Pedestrian' (or 'Pedestrians').</p>
<p>Each pedestrian with a <code>Type</code> is considered in that <code>Type</code>'s <code>Group</code>.</p>
<p>Pedestrians with <code>Composite Types</code> are in a <code>Group</code> for each <code>Type</code>.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md229"></a>
Type General Syntax Rules</h2>
<ol type="1">
<li><code>Type</code> names can only contain Letters, Underscores, and Hyphens &lsquo;(a-z), (A-Z), &rsquo;_', '-'`</li>
</ol>
<hr  />
<h1><a class="anchor" id="autotoc_md231"></a>
Locations</h1>
<p><code>Locations</code> are rectangular regions that can be used in <code>Selectors</code>, <code>Conditions</code>, and <code>Actions</code>.</p>
<p>After being declared, <code>Location</code> names are always preceded by a <code>@</code></p>
<div class="fragment"><div class="line">Location:</div>
<div class="line">  Name: &lt;name&gt;</div>
<div class="line">  Dimensions:</div>
<div class="line">    Center: &lt;center_coords&gt;  // Coord Value</div>
<div class="line">    Lengths: &lt;side_lengths&gt;  // Coord Value</div>
<div class="line">    Rotation: &lt;rotation&gt;     // Numeric Value</div>
<div class="line">.</div>
</div><!-- fragment --><ul>
<li>*Name* - The name used to reference this <code>Location</code></li>
<li>*Dimensions* - The dimensions for the <code>Location</code><ul>
<li>*Center* - X,Y,Z coordinates for the center of the rectangle as coordinates.</li>
<li>*Lengths* - X,Y,Z lengths of the rectangle as coordinates.</li>
<li>*Rotation* - degrees of clockwise rotation as a numeric value</li>
</ul>
</li>
</ul>
<p>Example: </p><div class="fragment"><div class="line">Location:</div>
<div class="line">  Name: Aisle</div>
<div class="line">  Dimensions:</div>
<div class="line">    Center: {15, 1.7}     // Center of rectangle is at (15, 1.7)</div>
<div class="line">    Lenghts: {30, 0.3}    // Width of 30m, Height of 30cm</div>
<div class="line">    Rotation: 0           // Rotated 0 degrees (aligned with X axis)</div>
<div class="line">.</div>
</div><!-- fragment --> <hr  />
<h2><a class="anchor" id="autotoc_md233"></a>
Locations General Syntax Rules</h2>
<ol type="1">
<li><code>Location</code> names are always preceded by a <code>@</code> after the declaration</li>
</ol>
<hr  />
<h1><a class="anchor" id="autotoc_md235"></a>
Selectors</h1>
<p><code>Selectors</code> are how pedestrians are selected for a certain Type.</p>
<p>Selecting pedestrians is done through a <code>Selector</code> declaration. The basic syntax is as follows: </p><div class="fragment"><div class="line">Selector:</div>
<div class="line">  Type: &lt;types&gt;</div>
<div class="line">  From: &lt;type&gt;                  // Optional, defaults to base pedestrians group</div>
<div class="line">  Select: &lt;selection_criteria&gt;</div>
<div class="line">.</div>
</div><!-- fragment --><ul>
<li>*Type* - The Type to assign to selected pedestrians.</li>
<li>*From* - The Group to select pedestrians from.</li>
<li>*Select* - The exact <code>Select</code> criteria to use. Available <code>Select</code> criteria are listed under Available Select Criteria.</li>
</ul>
<p>Selectors are applied with precedence equal to the order they appear in the <code>Behavior</code> file.</p>
<p>Example: </p><div class="fragment"><div class="line">Selector:   // Selects exactly 10 pedestrians to be of typeA</div>
<div class="line">  Type: typeA</div>
<div class="line">  Select: 10</div>
<div class="line">.</div>
<div class="line"> </div>
<div class="line">Selector:   // Selects 50% of pedestrians to be of typeB</div>
<div class="line">  Type: typeB</div>
<div class="line">  Select 50%</div>
<div class="line">.</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md237"></a>
Selecting From Groups</h2>
<p><code>Selectors</code> can select from specific Groups</p>
<p>This has the effect of selecting the pedestrians for a Composite Type but allows for more dynamic proportions. This allows for refined selections within selections.</p>
<div class="fragment"><div class="line">Types:</div>
<div class="line">  typeA</div>
<div class="line">  typeB</div>
<div class="line">  typeC</div>
<div class="line">.</div>
<div class="line"> </div>
<div class="line">Select:        // Selects 50% of pedestrians to be typeA</div>
<div class="line">  Type: typeA</div>
<div class="line">  Select: 50%</div>
<div class="line">.</div>
<div class="line"> </div>
<div class="line">Select:        // Selects 15% of typeA pedestrians to also be typeB</div>
<div class="line">  Type: typeB</div>
<div class="line">  From: typeA</div>
<div class="line">  Select: 15%</div>
<div class="line">.</div>
<div class="line"> </div>
<div class="line">Select:       // Selects 5% of typeA pedestrians to also be typeC</div>
<div class="line">  Type: typeC</div>
<div class="line">  From: typeA</div>
<div class="line">  Select: 5%</div>
<div class="line">.</div>
</div><!-- fragment --><p>With 100 pedestrians:</p><ul>
<li>39 pedestrians are typeA.</li>
<li>8 pedestrians are typeA and typeB.</li>
<li>3 pedestrians are typeA and typeC.</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md239"></a>
Selector Exclusivity</h2>
<p>When a pedestrian is selected from a <code>Group</code>, it is marked as used and can not be selected by another <code>Selector</code>.</p>
<div class="fragment"><div class="line">Select:</div>
<div class="line">  Type: typeB</div>
<div class="line">  Group: typeA</div>
<div class="line">  Select: 15%</div>
<div class="line">.</div>
<div class="line"> </div>
<div class="line">Select:</div>
<div class="line">  Type: typeD</div>
<div class="line">  Group: typeA</div>
<div class="line">  Select: 20%</div>
<div class="line">.</div>
</div><!-- fragment --><p> Means: Those 15% of 'typeA' pedestrians that also are typeB can not be selected from again. Any selections for typeD in the above scenario will never also be typeB.</p>
<p>However, they can be selected <b>from</b> 'typeB'.</p>
<p>TODO(tyler): What happens if those values exceed 100%?</p>
<div class="fragment"><div class="line">Select:</div>
<div class="line">  Type: typeC</div>
<div class="line">  Group: typeB</div>
<div class="line">  Select: 15%</div>
<div class="line">.</div>
</div><!-- fragment --><p>This may result in some pedestrians being of types typeA, typeB, and typeC.</p>
<p>TODO(tyler): What happens if we want some overlap?</p>
<hr  />
<h2><a class="anchor" id="autotoc_md241"></a>
Required Selectors</h2>
<p><code>Selectors</code> can be marked as <code>Required</code> with a 'Required' <code>Component</code>.</p>
<p>This means, if the <code>Selector</code> is unable to be filled an error will be thrown, and the simulation will stop.</p>
<div class="fragment"><div class="line">Types:</div>
<div class="line">  typeA</div>
<div class="line">  typeB</div>
<div class="line">.</div>
<div class="line"> </div>
<div class="line">Selector:</div>
<div class="line">  Type: typeA</div>
<div class="line">  Select: Everyone</div>
<div class="line">.</div>
<div class="line"> </div>
<div class="line">Selector:</div>
<div class="line">  Required</div>
<div class="line">  Type: typeB</div>
<div class="line">  Select: 50%</div>
<div class="line">.</div>
</div><!-- fragment --><p> Output: </p><div class="fragment"><div class="line">Behavior: Example, Required Selector Starved For Type: 2 From Group: 0&quot;</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md243"></a>
Available Select Criteria</h2>
<ol type="1">
<li>Everyone</li>
<li>Percent</li>
<li>Exactly N</li>
</ol>
<hr  />
<h3><a class="anchor" id="autotoc_md245"></a>
Everyone</h3>
<div class="fragment"><div class="line">Select: Everyone</div>
</div><!-- fragment --><p>This select criteria will select every pedestrian to have the selected Type</p>
<hr  />
<h3><a class="anchor" id="autotoc_md247"></a>
Percent</h3>
<p>Selects a percentage of a <code>Group</code> for the provided <code>Type</code></p>
<div class="fragment"><div class="line">&lt;value&gt;%</div>
</div><!-- fragment --><p> &lt;value&gt; - Number Value (1 - 100)</p>
<p>Example: </p><div class="fragment"><div class="line">Select: 15%</div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="autotoc_md249"></a>
Exactly N</h3>
<p>Selects an exact number of pedestrians from a <code>Group</code>.</p>
<div class="fragment"><div class="line">Exaclty &lt;value&gt;</div>
</div><!-- fragment --><p> &lt;value&gt; - Number Value</p>
<p>Example: </p><div class="fragment"><div class="line">Select: 10</div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="autotoc_md251"></a>
Location</h3>
<p>Selects all pedestrians inside a given location.</p>
<div class="fragment"><div class="line">Select: In &lt;location&gt;</div>
</div><!-- fragment --><p> &lt;location&gt; - Name of Location</p>
<p>Example: </p><div class="fragment"><div class="line">Select: In @Elevator</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md253"></a>
Selectors General Syntax Rules</h2>
<hr  />
<h1><a class="anchor" id="autotoc_md255"></a>
Actions</h1>
<p><code>Actions</code> are what affect a Pedestrian's position, velocity, state, etc.</p>
<p><code>Actions</code> work by applying attribute modifiers known as Atoms each time step their <code>Condition</code> is satisfied.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md257"></a>
Unconditional Actions</h2>
<p>An <code>Unconditional Action</code> will ALWAYS take effect, applying its <code>Atoms</code> each timestep.</p>
<div class="fragment"><div class="line">Action (&lt;type&gt;):</div>
<div class="line">  Response: &lt;atoms&gt;</div>
<div class="line">.</div>
</div><!-- fragment --><ul>
<li>&lt;type&gt; being the pedestrian type that follows this <code>Action</code></li>
<li>&lt;atoms&gt; being the steps taken in an action, more in <em>Atoms</em></li>
</ul>
<p>Example: </p><div class="fragment"><div class="line">Action (injured_person):         // Action Declaration for &quot;injured_person&quot;s</div>
<div class="line">  Response: scale velocity 0.75  // &quot;Scale&quot; Atom</div>
<div class="line">.</div>
</div><!-- fragment --><p> With this Behavior, an injured person will always walk at 75% speed.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md259"></a>
A.2. Conditional Actions</h2>
<p>A <code>Conditional Action</code> will only take effect if its <code>Condition</code> is satisfied.</p>
<p><code>Conditional Actions</code> are written as follows: </p><div class="fragment"><div class="line">Action (&lt;type&gt;):</div>
<div class="line">  Condition: &lt;condition&gt;</div>
<div class="line">  Response: &lt;atoms&gt;</div>
<div class="line">.</div>
</div><!-- fragment --><ul>
<li>&lt;type&gt; being the pedestrian type that follows this <code>Action</code>. <em>See Types</em>.</li>
<li>&lt;atoms&gt; being the steps taken in an action. <em>See Atoms</em>.</li>
<li>&lt;condition&gt; being the condition to be filled. <em>See Conditions</em>.</li>
</ul>
<hr  />
<p>Example: </p><div class="fragment"><div class="line">Action (listener): </div>
<div class="line">  Condition: !announcement occurring. // Condition</div>
<div class="line">  Response: set velocity to {0}          // Atom</div>
<div class="line">.</div>
</div><!-- fragment --><p> Pedestrians of listener will stop moving while the announcement event is occurring.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md262"></a>
Action Durations</h2>
<p>Normally <code>Actions</code> only apply to the time step their <code>Condition</code> is true in.</p>
<p>If a longer response is needed, a <code>Duration</code> can be added to the <code>Action</code>.</p>
<div class="fragment"><div class="line">Action (&lt;type&gt;): </div>
<div class="line">  Condition: &lt;condition&gt;</div>
<div class="line">  Response: &lt;atoms&gt;</div>
<div class="line">  Duration: &lt;value&gt;</div>
<div class="line">.</div>
</div><!-- fragment --><ul>
<li>&lt;type&gt; being the Type the action applies to</li>
<li>&lt;atoms&gt; being the Atoms for the <code>Action</code></li>
<li>&lt;condition&gt; being the Condition for the action to start</li>
<li>&lt;value&gt; being a numerical Value, for how long the action should continue</li>
</ul>
<hr  />
<p>Example, Someone Tripping: </p><div class="fragment"><div class="line">Action (tripper):</div>
<div class="line">  Condition: 10 seconds after !Start // Condition</div>
<div class="line">  Response: set velocity to {0}         // &quot;Set&quot; Atom</div>
<div class="line">  Duration: 15 seconds               // Duration</div>
<div class="line">.</div>
</div><!-- fragment --><p>Pedestrians of type <code>tripper</code> will trip after 10 seconds from the simulation starting, and remain still for 15 seconds.</p>
<p>This will cause all <code>trippers</code> to trip at exactly the same time. Normally, randomness should be added to a scenario such as this. For more information on how to add randomness to <code>Duration</code> and <code>Conditions</code>, see <em>Random Values</em>.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md265"></a>
Atoms</h2>
<p><code>Atoms</code> are the part of an <code>Action</code> that actually affects a pedestrian.</p>
<p>The do this by changing pedestrian Attributes.</p>
<p>See <em>Available Atoms</em> for the list of available <code>Atoms</code>.</p>
<hr  />
<h3><a class="anchor" id="autotoc_md267"></a>
Atom Lists</h3>
<p>An <code>Atom List</code> is the collection of <code>Atoms</code> that make up an <code>Action</code>.</p>
<p><code>Atom Lists</code> are written as follows: <code>&lt;atom&gt; , &lt;atom&gt;</code></p>
<p><b>Important Note:</b> <code>Atom</code> effects are applied in the order they are listed</p>
<hr  />
<p>Example:</p>
<div class="fragment"><div class="line">set velocity to {0}, set state to #listening</div>
</div><!-- fragment --><p> This <code>Atom List</code> will result in the pedestrian stopping and their state being set to "listening"</p>
<p>(Pedestrian state is useful in Conditions)</p>
<hr  />
<h2><a class="anchor" id="autotoc_md270"></a>
Available Atoms</h2>
<p>There are two types of available <code>Atoms</code>:</p><ol type="1">
<li>Set </li>
</ol>
<h2><a class="anchor" id="autotoc_md271"></a>
2. Scale</h2>
<h3><a class="anchor" id="autotoc_md272"></a>
Set</h3>
<p>The <code>Set Atom</code> sets a pedestrian's attribute to a specific value.</p>
<div class="fragment"><div class="line">set &lt;attribute&gt; to &lt;attribute_value&gt;</div>
</div><!-- fragment --><ul>
<li>&lt;attributes&gt; are described in Attributes.</li>
<li>&lt;attribute_values&gt; are described in Attribute Values.</li>
</ul>
<h3><a class="anchor" id="autotoc_md273"></a>
Scale</h3>
<p>The <code>Scale Atom</code> multiplies a pedestrian attribute by a given value</p>
<div class="fragment"><div class="line">scale &lt;attribute&gt; &lt;attribute_value&gt;</div>
</div><!-- fragment --><p>Currently, only pedestrian <code>Velocity</code> can be scaled.</p>
<ul>
<li>&lt;attributes&gt; are described in Attributes.</li>
<li>&lt;attribute_values&gt; are described in Attribute Values.</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md275"></a>
Action Targets</h2>
<p>Sometimes Pedestrians will want to affect other pedestrians around them.</p>
<p>This is done through the use of <code>Targets</code>.</p>
<div class="fragment"><div class="line">Action (&lt;type&gt;):</div>
<div class="line">  Condition: &lt;condition&gt;  // Condition</div>
<div class="line">  Response: &lt;atoms&gt;       // Atoms</div>
<div class="line">  Target: &lt;target&gt;        // Action Target</div>
</div><!-- fragment --><hr  />
<p>Example:</p>
<div class="fragment"><div class="line">Action (aggressive):</div>
<div class="line">  Response: set target velocity {0}</div>
<div class="line">  Target: nearest pedestrian</div>
</div><!-- fragment --><p> This results in the pedestrian stopping the nearest pedestrian around them.</p>
<hr  />
<h3><a class="anchor" id="autotoc_md278"></a>
Available Targets</h3>
<p>There is currently only one type of action <code>Target</code>, the "nearest" <code>Target</code>. This <code>Target</code> describes proximity to a pedestrian as part of an <code>Action</code>.</p>
<hr  />
<h4><a class="anchor" id="autotoc_md280"></a>
Nearest</h4>
<p>Selects the nearest of a given type to be the target</p>
<div class="fragment"><div class="line">nearest &lt;type_list&gt;   // selects the nearest pedestrian with any of the listed types</div>
<div class="line"> </div>
<div class="line">// or</div>
<div class="line"> </div>
<div class="line">nearest pedestrian    // selects any pedestrian</div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="autotoc_md282"></a>
Target Modifiers</h3>
<p><code>Target Modifiers</code> change how pedestrians are selected to be the Target of an action.</p>
<p><code>Target Modifiers</code> are simply appended to the end of the <code>Action Target</code>.</p>
<p>Example: </p><div class="fragment"><div class="line">Target: nearest pedestrain in front within 1.0</div>
</div><!-- fragment --><p> This selects the nearest pedestrian in the direction of motion that is within 1 meter.</p>
<hr  />
<h4><a class="anchor" id="autotoc_md284"></a>
Distance Target Modifier</h4>
<p>Targets can be filtered by their distance to the pedestrian.</p>
<div class="fragment"><div class="line">within &lt;numeric_value&gt;</div>
</div><!-- fragment --><hr  />
<h4><a class="anchor" id="autotoc_md286"></a>
Direction Target Modifier</h4>
<p>Targets can be filtered by their direction from the pedestrian.</p>
<p>Currently, there are only two directions. </p><div class="fragment"><div class="line">in front   // used to select pedestrians in the direction the pedestrian is headed</div>
<div class="line"> </div>
<div class="line">behind     // used to select pedestrians in the opposite direction the pedestrian is headed</div>
</div><!-- fragment --><hr  />
<h4><a class="anchor" id="autotoc_md288"></a>
Location Target Modifier</h4>
<p>Targets can be filtered by whether they are inside a <code>Location</code> or not.</p>
<div class="fragment"><div class="line">in &lt;location_name&gt;</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md290"></a>
Conditions</h1>
<p>A <code>Condition</code> is what decides if a <code>Conditional Action</code> or <code>Event</code> occurs.</p>
<p><code>Conditions</code> are comprised of one or more <code>Sub Conditions</code> and the boolean operations between them (and/or).</p>
<p><code>Conditions</code> do not stand on their own, and only appear as part of an <code>Action</code> or <code>Event</code> declaration.</p>
<hr  />
<p>Example:</p>
<div class="fragment"><div class="line">Action (typeA):</div>
<div class="line">  Condition: !example occurred and 5 seconds after !Start</div>
<div class="line">  Response: set velocity to {0}</div>
<div class="line">  Duration: 10 seconds</div>
<div class="line">.</div>
</div><!-- fragment --><p> This results in typeA pedestrians stopping for 10 seconds after the example event has occurred but not before 5 seconds have passed in the simulation.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md293"></a>
Sub Conditions</h2>
<p>A <code>Sub Condition</code> defines a single condition of the state of the simulation in which it returns true.</p>
<p><em>See Available Sub Conditions</em></p>
<hr  />
<h2><a class="anchor" id="autotoc_md295"></a>
Available Sub Conditions</h2>
<p>There are currently 6 total available sub conditions:</p><ol type="1">
<li>Elapsed Time</li>
<li>Spatial</li>
<li>Event Status</li>
<li>Location Enter/Leave</li>
<li>Inside Location</li>
<li>Pedestrian Attributes</li>
</ol>
<hr  />
<h3><a class="anchor" id="autotoc_md297"></a>
Elapsed Time</h3>
<p>This <code>Condition</code> will be true when a provided amount of time has passed from the <b>start</b> of an Event</p>
<p><b>Note:</b> This is true only for <b>one time step</b> when the time has elapsed, until the <code>Event</code> starts again.</p>
<div class="fragment"><div class="line">&lt;numeric_value&gt; seconds after &lt;event&gt;.</div>
</div><!-- fragment --><hr  />
<p>Example: </p><div class="fragment"><div class="line">Action (typeA):</div>
<div class="line">  Condition: 10 seconds after !Start // Elapsed Time Condition</div>
<div class="line">  Response: set velocity to {0}         // &quot;Set&quot; Atom</div>
<div class="line">  Duration: 5 seconds                // Duration</div>
<div class="line">.</div>
</div><!-- fragment --><p> <b>Note:</b> without the <code>Duration</code> the pedestrian would stop moving for only one time step. <em>See Duration</em>.</p>
<hr  />
<h3><a class="anchor" id="autotoc_md300"></a>
Spatial</h3>
<p>This <code>Condition</code> will be true when the condition Target is within a certain distance</p>
<div class="fragment"><div class="line">target within &lt;numeric_value&gt;.</div>
</div><!-- fragment --><hr  />
<p>Example: </p><div class="fragment"><div class="line">Action (typeA):</div>
<div class="line">  Condition: 10 seconds after !Start // Elapsed Time Condition</div>
<div class="line">  Response: set velocity to {0}         // &quot;Set&quot; Atom</div>
<div class="line">  Duration: 5 seconds                // Duration</div>
<div class="line">.</div>
</div><!-- fragment --><p> <b>Note:</b> without the <code>Duration</code> the pedestrian would stop moving for only one time step. <em>See Duration</em>.</p>
<hr  />
<h3><a class="anchor" id="autotoc_md303"></a>
Event Status</h3>
<p>This <code>Condition</code> checks for the status of an Event.</p>
<div class="fragment"><div class="line">&lt;event&gt; is &lt;status&gt;</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md304"></a>
Available Statuses:</h4>
<div class="fragment"><div class="line">Starting  // True for the timestep the event starts</div>
<div class="line">Ending    // True for the timestep the event ends</div>
<div class="line">Occurring // True for every timestep between event start and end</div>
<div class="line">Occurred  // True if the event has occurred at all during the simulation</div>
</div><!-- fragment --><hr  />
<p>Example: </p><div class="fragment"><div class="line">Action (listener):</div>
<div class="line">  Condition: !announcement is occurring</div>
<div class="line">  Response: set velocity to {0}</div>
<div class="line">.</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md307"></a>
Location Enter/Leave</h2>
<p>This <code>Condition</code> checks if a pedestrian has entered or left a Location.</p>
<div class="fragment"><div class="line">Enter &lt;location_name&gt;</div>
<div class="line"> </div>
<div class="line">// or</div>
<div class="line"> </div>
<div class="line">Exit &lt;location_name&gt;</div>
</div><!-- fragment --><p>Example: </p><div class="fragment"><div class="line">Action (Luggage_Grabber):</div>
<div class="line">  Condition: Enter @Aisle</div>
<div class="line">  Response: set velocity to {0}</div>
<div class="line">  Duration: 10-30 seconds</div>
<div class="line">.</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md309"></a>
Inside Location</h2>
<p>This <code>Condition</code> checks if a pedestrian is inside a Location.</p>
<div class="fragment"><div class="line">In &lt;location_name&gt;</div>
</div><!-- fragment --><p>Example: </p><div class="fragment"><div class="line">Action (Patient):</div>
<div class="line">  Target: nearest pedestrian, within 5m, in front</div>
<div class="line">  Condition: Target in @Elevator</div>
<div class="line">  Response: set velocity to {0}</div>
<div class="line">.</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md311"></a>
Pedestrian Attributes</h2>
<p>This <code>Condition</code> checks if a pedestrian's Attribute is a given Attribute Value.</p>
<div class="fragment"><div class="line">&lt;attribute&gt; is &lt;attribute_value&gt;</div>
</div><!-- fragment --><p>Example: </p><div class="fragment"><div class="line">Action (typeA):</div>
<div class="line">  Condition: state is #scared  // Condition for the pedestrian&#39;s &#39;State&#39; attribute</div>
<div class="line">  Response: scale velocity 2.0</div>
<div class="line">.</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md313"></a>
Attributes</h1>
<p>Each pedestrian has what are called <code>Attributes</code>.</p>
<p>These attributes include: </p><div class="fragment"><div class="line">Position    // Coordiante pedestrian is currently at</div>
<div class="line">Velocity    // Velocity vector of pedestrian</div>
<div class="line">Goal        // The current coordinate the pedestrian is heading to</div>
<div class="line">State       // Pedestrians internal state</div>
</div><!-- fragment --><p>These <code>Attributes</code> are important for <code>Actions</code> and <code>Conditions</code>.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md315"></a>
Ex. Example</h1>
<div class="fragment"><div class="line">Action (typeA):</div>
<div class="line">  Condition: state is #scared  // Condition for the pedestrian&#39;s &#39;State&#39; attribute</div>
<div class="line">  Response: scale velocity 2.0 // Atom affecting the pedestrian&#39;s &#39;Velocity&#39; attribute</div>
<div class="line">.</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md317"></a>
Attribute Values</h2>
<p>Attributes each have a different value type.</p>
<div class="fragment"><div class="line">Position: Coordinate</div>
<div class="line">Velocity: Coordinate</div>
<div class="line">Goal    : Coordinate</div>
<div class="line">State   : State</div>
</div><!-- fragment --><p>Generally, <code>Attribute Values</code> can only be compared to others of the same type, except <code>Coordinate</code> values.</p>
<p><code>Coordinate</code> values can be compared with <code>Locations</code>.</p>
<p>Example </p><div class="fragment"><div class="line">Condition: position is @aisle</div>
<div class="line"> </div>
<div class="line">// or</div>
<div class="line"> </div>
<div class="line">Condition: goal is @aisle</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md319"></a>
Events</h1>
<p>An <code>Event</code> is something that occurs during a simulation, that effects the whole simulation. For example, an announcement or fire could be an <code>Event</code>.</p>
<p><code>Events</code> have a start <code>Condition</code> and, optionally, an end Condition</p>
<p>An <code>Event</code> can only be described once, if a <code>Behavior</code> file tries to redefine an <code>Event</code> of the same name a <code>Behavior Error</code> is thrown.</p>
<p><code>Event</code> names are always preceded by a <code>!</code></p>
<p>Example: </p><div class="fragment"><div class="line">!announcement</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md321"></a>
Creating Events</h2>
<p><code>Events</code> a defined as follows: </p><div class="fragment"><div class="line">Event:</div>
<div class="line">  Name: &lt;name&gt;</div>
<div class="line">  Start: &lt;condition&gt;</div>
<div class="line">  End: &lt;condition&gt;    // Optional</div>
<div class="line">.</div>
</div><!-- fragment --><p>Example:</p>
<div class="fragment"><div class="line">Event:</div>
<div class="line">  Name: example</div>
<div class="line">  Start: 10 seconds after !Start</div>
<div class="line">  End: 10 seconds after !example</div>
<div class="line">.</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md323"></a>
Special Events</h2>
<p>Currently, there is only one special event that is predefined for each <code>Behavior</code>: <code>!Start</code>.</p>
<p>The <code>!Start</code> event fires at the start of a simulation run and is always <code>Occurring</code>.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md325"></a>
Events General Syntax Rules</h2>
<p><code>Event</code> names are always preceded by a <code>!</code> when used.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md327"></a>
Values</h1>
<p><code>Behaviors</code> support 3 types of values:</p>
<ol type="1">
<li>Numeric</li>
<li>Coordinates</li>
<li>State</li>
</ol>
<hr  />
<h2><a class="anchor" id="autotoc_md329"></a>
Numerical Values</h2>
<p>Anywhere there is a numerical value required the following can be used (with some exceptions):</p><ol type="1">
<li>Exact Values</li>
<li>Range Values</li>
<li>Random Values</li>
</ol>
<hr  />
<h3><a class="anchor" id="autotoc_md331"></a>
Exact Values</h3>
<p><code>Exact Values</code> are used when the value should be a specific value</p>
<p>There are two kinds of <code>Exact Values</code>:</p><ol type="1">
<li><code>Float Values</code></li>
<li><code>Number Values</code></li>
</ol>
<p><code>Float Values</code> have decimal precision, while <code>Number Values</code> are only integers.</p>
<p><code>Exact Values</code> are written as simple numerical values.</p>
<p>Example: </p><div class="fragment"><div class="line">50    // Number Value, has no decimal places</div>
<div class="line">50.15 // Float Value, has a decimal value</div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="autotoc_md333"></a>
Range Values</h3>
<p><code>Range Values</code> are singular random values within a given range.</p>
<p>When the <code>Behavior</code> is run, the value is the <b>same for every individual using that <code>Value</code></b>.</p>
<hr  />
<h4><a class="anchor" id="autotoc_md335"></a>
Float Value Ranges vs. Number Value Ranges</h4>
<p><code>Range Values</code> are either <code>Float Value Ranges</code> or <code>Number Value Ranges</code></p>
<p>With the difference being that: <code>Float Value Ranges</code> are any real value between the range and <code>Number Value Ranges</code> are any integer value between the range.</p>
<p><code>Range Values</code> are written as follows: </p><div class="fragment"><div class="line">// Number Value Range -&gt; 1, 2, or 3</div>
<div class="line">1 to 3</div>
<div class="line"> </div>
<div class="line">// Float Value Range -&gt; 1.0, 1.003, 1.11, 2.3, 2.5, 3.0, etc.</div>
<div class="line">1.0 to 3.0</div>
</div><!-- fragment --><hr  />
<p>Example: </p><div class="fragment"><div class="line">Selector:</div>
<div class="line">  Type: typeA</div>
<div class="line">  Select: 10 to 20%</div>
<div class="line">.</div>
</div><!-- fragment --><p>The exact percentage will be a random integer value between 10 and 20.</p>
<hr  />
<h3><a class="anchor" id="autotoc_md338"></a>
Random Values</h3>
<p><code>Random Values</code> are very similar to <code>Range Values</code>, with a random value in a given range.</p>
<p>The big difference is that: <code>Range Values</code> only have one random value, <code>Random Values</code> have a random value that is <b>different for each pedestrian</b>.</p>
<hr  />
<h4><a class="anchor" id="autotoc_md340"></a>
Float Random Values vs. Number Random Values</h4>
<p><code>Random Values</code> are either <code>Float Random Values</code> or <code>Number Random Values</code></p>
<p>With the difference being that: <code>Float Random Value</code> are any real value between the range and <code>Number Random Values</code> are any integer value between the range.</p>
<p>Random Values are written as follows: </p><div class="fragment"><div class="line">// Number Random Value -&gt; 1, 2, or 3 (different for each pedestrian)</div>
<div class="line">random 1 to 3</div>
<div class="line"> </div>
<div class="line">// Float Random Value -&gt; 1.0, 1.003, 1.11, 2.3, 2.5, 3.0, etc. (different for each pedestrian)</div>
<div class="line">random 1.0 to 3.0</div>
</div><!-- fragment --><hr  />
<p>Example: </p><div class="fragment"><div class="line">Action (typeA):</div>
<div class="line">  Condition: random 5-10 seconds after !Start</div>
<div class="line">  Response: set velocity {0}</div>
<div class="line">  Duration: random 10-20</div>
<div class="line">.</div>
</div><!-- fragment --><p> Each typeA pedestrian will stop randomly between 5 and 10 seconds after the start, then stay still for a random amount of time between 10 and 20 seconds.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md343"></a>
Coordinates</h2>
<p>Coordinate Values are X, Y, Z coordinates.</p>
<p>They are written: </p><div class="fragment"><div class="line">{ &lt;numeric_value&gt;, &lt;numeric_value&gt;, &lt;numeric_value&gt; }</div>
</div><!-- fragment --><p><b>The Y and Z coordinates are optional. When not specified, these coordinates are considered 0.</b></p>
<p>Example: </p><div class="fragment"><div class="line">{0}</div>
<div class="line"> </div>
<div class="line">// is the same as</div>
<div class="line"> </div>
<div class="line">{0, 0}</div>
<div class="line"> </div>
<div class="line">// is the same as</div>
<div class="line"> </div>
<div class="line">{0, 0, 0}</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md345"></a>
State</h2>
<p>Each pedestrian can have a single <code>State</code> associated with it. When a new state is set, it overrides the previous state.</p>
<p><code>States</code> are user defined, and used for <code>Conditions</code></p>
<p><code>States</code> are always preceded by a '#' when used, but are excluded in the definition.</p>
<p><code>States</code> are defined as follows: </p><div class="fragment"><div class="line">States:</div>
<div class="line">  stateA,</div>
<div class="line">  stateB,</div>
<div class="line">  stateC</div>
<div class="line">.</div>
</div><!-- fragment --><p>Example: </p><div class="fragment"><div class="line">States:</div>
<div class="line">  happy,</div>
<div class="line">  scared,</div>
<div class="line">  waiting</div>
<div class="line">.</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
